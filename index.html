<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å“ç‰Œå¤§è„‘ AI åŠ©æ‰‹</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        height: 100vh;
        overflow: hidden;
      }

      .body-wrapper {
        /* padding-top: 30px; */
        height: 100vh;
        display: grid;
        padding: 0 32px;
      }

      .page-title {
        color: white;
        padding: 32px 24px 0 32px;
      }

      .page-title h1 {
        font-size: 26px;
        font-weight: bold;
      }

      .main-container {
        display: flex;
        flex-direction: column;
        width: 100%;
        /* height: 100vh; */
        /* max-width: 1400px; */
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        /* margin: 20px; */
        /* height: 95vh; */
        border-top-left-radius: 20px;
        border-top-right-radius: 20px;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      /* ä¸»è¦å†…å®¹åŒºåŸŸ */
      .content-container {
        display: flex;
        flex: 1;
        overflow: hidden;
      }

      /* å·¦ä¾§æ•°æ®é¢æ¿ */
      .data-panel {
        width: 350px;
        background: rgba(255, 255, 255, 0.95);
        border-right: 1px solid rgba(255, 255, 255, 0.2);
        padding: 32px 24px 24px 32px;
        padding-top: 32px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 16px;
        scrollbar-width: thin;
        scrollbar-color: rgba(103, 126, 234, 0.5) rgba(0, 0, 0, 0.1);
      }

      .data-panel::-webkit-scrollbar {
        width: 6px;
        background: transparent;
      }

      .data-panel::-webkit-scrollbar-track {
        background: transparent;
      }

      .data-panel::-webkit-scrollbar-thumb {
        background: rgba(103, 126, 234, 0.5);
        border-radius: 3px;
        transition: background 0.3s ease;
      }

      .data-panel::-webkit-scrollbar-thumb:hover {
        background: rgba(103, 126, 234, 0.7);
      }

      .data-panel:hover::-webkit-scrollbar-thumb {
        background: rgba(103, 126, 234, 0.5);
      }

      .data-panel h2,
      .middle-panel-title,
      .dashboard-title {
        font-size: 18px;
        font-weight: 600;
        color: #2d3748;
        padding: 0 0 8px 0;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
        letter-spacing: 1px;
      }

      .data-sources-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        margin-bottom: 16px;
      }

      .data-source {
        background: rgb(196 196 196 / 10%);
        /* border: 1px solid rgba(103, 126, 234, 0.3); */
        border-radius: 12px;
        padding: 14px;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .data-source:hover {
        background: rgba(103, 126, 234, 0.2);
        transform: translateY(-2px);
      }

      .data-source.active {
        background: rgba(103, 126, 234, 0.3);
        border-color: #667eea;
      }

      .data-source-title {
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 6px;
        font-size: 14px;
      }

      .data-source-meta {
        display: flex;
        justify-content: space-between;
        font-size: 11px;
        color: #718096;
      }

      .data-source-meta span {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .data-source-meta .update-time {
        color: #667eea;
      }

      .dashboard-panel {
        margin-top: 20px;
        margin-bottom: 20px;
        height: 100%;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .metric-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        margin-top: 16px;
      }

      .metric-card {
        background: rgba(103, 126, 234, 0.1);
        border-radius: 8px;
        padding: 12px;
      }

      .metric-value {
        font-size: 20px;
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 4px;
      }

      .metric-label {
        font-size: 11px;
        color: #718096;
      }

      .chart-container {
        height: 150px;
        margin-top: 12px;
        position: relative;
      }

      .chart-bar {
        position: absolute;
        bottom: 0;
        width: 8%;
        background: linear-gradient(to top, #667eea, #764ba2);
        border-radius: 4px 4px 0 0;
        transition: height 0.3s ease;
      }

      .chart-label {
        position: absolute;
        bottom: -20px;
        font-size: 10px;
        color: #718096;
        text-align: center;
        width: 8%;
      }

      .trend-indicator {
        display: inline-flex;
        align-items: center;
        font-size: 12px;
        padding: 2px 6px;
        border-radius: 4px;
        margin-left: 6px;
      }

      .trend-up {
        background: rgba(72, 187, 120, 0.1);
        color: #2f855a;
      }

      .trend-down {
        background: rgba(245, 101, 101, 0.1);
        color: #c53030;
      }

      /* å³ä¾§èŠå¤©åŒºåŸŸ */
      .chat-container {
        width: 350px;
        display: flex;
        flex-direction: column;
        background: rgba(255, 255, 255, 0.98);
        border-top-left-radius: 12px;
      }

      .chat-header {
        padding: 32px 24px 20px 32px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        background: rgba(255, 255, 255, 0.95);
      }

      .chat-title {
        font-size: 18px;
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 4px;
      }

      .chat-subtitle {
        font-size: 14px;
        color: #718096;
      }

      .chat-messages {
        flex: 1;
        padding: 24px;
        overflow-y: auto;
        background: linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0.98),
          rgba(249, 250, 251, 0.98)
        );
      }

      .message {
        margin-bottom: 24px;
        animation: fadeInUp 0.5s ease-out;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .message.user {
        text-align: right;
      }

      .message.assistant {
        text-align: left;
      }

      .message-content {
        display: inline-block;
        max-width: 70%;
        padding: 16px 20px;
        border-radius: 20px;
        font-size: 14px;
        line-height: 1.5;
      }

      .message.user .message-content {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-bottom-right-radius: 8px;
      }

      .message.assistant .message-content {
        background: rgba(247, 250, 252, 0.9);
        color: #2d3748;
        border: 1px solid rgba(226, 232, 240, 0.8);
        border-bottom-left-radius: 8px;
      }

      .typing-indicator {
        display: none;
        padding: 16px 20px;
        background: rgba(247, 250, 252, 0.9);
        border: 1px solid rgba(226, 232, 240, 0.8);
        border-radius: 20px;
        border-bottom-left-radius: 8px;
        max-width: 70%;
      }

      .typing-dots {
        display: flex;
        gap: 4px;
      }

      .typing-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #cbd5e0;
        animation: typing 1.5s infinite;
      }

      .typing-dot:nth-child(2) {
        animation-delay: 0.2s;
      }

      .typing-dot:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes typing {
        0%,
        60%,
        100% {
          transform: scale(0.8);
          opacity: 0.5;
        }
        30% {
          transform: scale(1);
          opacity: 1;
        }
      }

      .chat-input-container {
        padding: 20px 24px 32px 24px;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        background: rgba(255, 255, 255, 0.95);
      }

      .chat-input-wrapper {
        position: relative;
        display: flex;
        align-items: flex-end;
        gap: 12px;
      }

      .chat-input {
        flex: 1;
        border: 2px solid rgba(226, 232, 240, 0.8);
        border-radius: 16px;
        padding: 14px 20px;
        font-size: 14px;
        resize: none;
        outline: none;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.9);
        max-height: 120px;
        min-height: 48px;
      }

      .chat-input:focus {
        border-color: #667eea;
        background: white;
      }

      .send-button {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        border-radius: 12px;
        padding: 12px 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 48px;
        height: 48px;
      }

      .send-button:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(103, 126, 234, 0.4);
      }

      .send-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .quick-actions {
        display: flex;
        gap: 8px;
        margin-bottom: 16px;
        flex-wrap: wrap;
      }

      .quick-action {
        background: rgba(103, 126, 234, 0.1);
        border: 1px solid rgba(103, 126, 234, 0.3);
        border-radius: 20px;
        padding: 8px 16px;
        font-size: 12px;
        color: #667eea;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .quick-action:hover {
        background: rgba(103, 126, 234, 0.2);
        transform: translateY(-1px);
      }

      .data-insights {
        background: rgba(52, 211, 153, 0.1);
        border: 1px solid rgba(52, 211, 153, 0.3);
        border-radius: 12px;
        padding: 16px;
        margin: 16px 0;
        margin-top: 0;
      }

      .insights-title {
        font-weight: 600;
        color: #065f46;
        font-size: 14px;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .insights-content {
        font-size: 13px;
        color: #047857;
        line-height: 1.4;
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .main-container {
          margin: 0;
          border-radius: 0;
          height: 100vh;
        }

        .data-panel {
          display: none;
        }
      }

      .llm-tool-pill {
        display: inline-flex;
        align-items: center;
        background: rgba(103, 126, 234, 0.12);
        border: 1px solid rgba(103, 126, 234, 0.25);
        border-radius: 16px;
        padding: 4px 12px;
        font-size: 13px;
        color: #667eea;
        margin-bottom: 8px;
        margin-right: 8px;
        gap: 6px;
        font-family: inherit;
      }
      .llm-tool-pill svg {
        width: 16px;
        height: 16px;
        opacity: 0.8;
      }
      .llm-tool-status {
        color: #a0aec0;
        font-size: 13px;
        margin-bottom: 8px;
        margin-left: 2px;
      }

      .middle-panel {
        flex: 1;
        min-width: 220px;
        background: rgba(255, 255, 255, 0.93);
        border-right: 1px solid rgba(230, 230, 250, 0.25);
        border-left: 1px solid rgba(230, 230, 250, 0.18);
        display: flex;
        flex-direction: column;
        align-items: stretch;
        padding: 32px 32px 0 32px;
        gap: 18px;
        box-shadow: 0 0 0 0 #fff;
      }
      .middle-panel-title {
        /* unified above */
      }
      .output-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 8px;
      }
      .output-card {
        background: #f7f8fa;
        border-radius: 14px;
        box-shadow: 0 2px 8px rgba(103, 126, 234, 0.06);
        padding: 22px 18px 18px 18px;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        cursor: pointer;
        transition: box-shadow 0.18s, background 0.18s;
        border: 1.5px solid transparent;
      }
      .output-card:hover {
        background: #eef1fa;
        box-shadow: 0 6px 24px rgba(103, 126, 234, 0.13);
        border: 1.5px solid #667eea33;
      }
      .output-card-icon {
        width: 32px;
        height: 32px;
        margin-bottom: 10px;
        color: #667eea;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .output-card-label {
        font-size: 16px;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 4px;
      }
      .output-card-subtext {
        font-size: 12px;
        color: #718096;
      }
    </style>
  </head>
  <body>
    <div class="body-wrapper">
      <div class="page-title">
        <h1>å“ç‰Œå¤§è„‘</h1>
      </div>
      <div class="main-container">
        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="content-container">
          <!-- å·¦ä¾§æ•°æ®é¢æ¿ -->
          <div class="data-panel">
            <h2>æ•°æ®</h2>
            <div class="data-sources-grid">
              <div
                class="data-source active"
                onclick="selectDataSource(this, 'trend')"
              >
                <div class="data-source-title">å“ç‰Œè¶‹åŠ¿åˆ†æ</div>
                <div class="data-source-meta">
                  <span>2.3K+ é›¶å”®å“ç‰Œ</span>
                  <span class="update-time">ä»Šå¤©</span>
                </div>
              </div>

              <div class="data-source" onclick="selectDataSource(this, 'sku')">
                <div class="data-source-title">SKUæŠ•æ”¾æ•ˆæœ</div>
                <div class="data-source-meta">
                  <span>12 ä¸ªSKU</span>
                  <span class="update-time">2å°æ—¶å‰</span>
                </div>
              </div>

              <div
                class="data-source"
                onclick="selectDataSource(this, 'content')"
              >
                <div class="data-source-title">å†…å®¹é“¾è·¯åˆ†æ</div>
                <div class="data-source-meta">
                  <span>890K+ å†…å®¹</span>
                  <span class="update-time">å®æ—¶</span>
                </div>
              </div>

              <div
                class="data-source"
                onclick="selectDataSource(this, 'sentiment')"
              >
                <div class="data-source-title">ç”¨æˆ·è¯­è¨€æ´å¯Ÿ</div>
                <div class="data-source-meta">
                  <span>1.2M+ è¯„è®º</span>
                  <span class="update-time">30åˆ†é’Ÿå‰</span>
                </div>
              </div>

              <div
                class="data-source"
                onclick="selectDataSource(this, 'personality')"
              >
                <div class="data-source-title">å“ç‰Œäººæ ¼</div>
                <div class="data-source-meta">
                  <span>åŠ¨æ€æ›´æ–°</span>
                  <span class="update-time">1å°æ—¶å‰</span>
                </div>
              </div>
            </div>

            <div class="dashboard-panel">
              <div class="dashboard-title">æ•°æ®æ¦‚è§ˆ</div>
              <div class="data-insights">
                <div class="insights-title">å®æ—¶æ´å¯Ÿ</div>
                <div class="insights-content">
                  é«˜ç«¯ä¸»ç²®å¸‚åœºå¢é•¿+35%ï¼Œæ— è°·ç‰©é…æ–¹éœ€æ±‚æ˜¾è‘—æå‡ï¼ŒåŠŸèƒ½æ€§ä¸»ç²®ï¼ˆå¦‚è‚ èƒƒè°ƒç†ã€ç¾æ¯›ï¼‰æˆä¸ºæ–°å¢é•¿ç‚¹ã€‚
                </div>
              </div>
              <div class="metric-grid">
                <div class="metric-card">
                  <div class="metric-value" id="metric1">--</div>
                  <div class="metric-label" id="metric1Label">--</div>
                </div>
                <div class="metric-card">
                  <div class="metric-value" id="metric2">--</div>
                  <div class="metric-label" id="metric2Label">--</div>
                </div>
                <div class="metric-card">
                  <div class="metric-value" id="metric3">--</div>
                  <div class="metric-label" id="metric3Label">--</div>
                </div>
                <div class="metric-card">
                  <div class="metric-value" id="metric4">--</div>
                  <div class="metric-label" id="metric4Label">--</div>
                </div>
              </div>
              <div class="chart-container" id="chartContainer">
                <!-- Chart bars will be inserted here by JavaScript -->
              </div>
            </div>
          </div>

          <!-- ä¸­é—´è¾“å‡ºç±»å‹é¢æ¿ -->
          <div class="middle-panel">
            <div class="middle-panel-title">æ‰§è¡Œ</div>
            <div class="output-grid">
              <div class="output-card">
                <div class="output-card-icon">
                  <svg
                    width="28"
                    height="28"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <rect x="5" y="7" width="18" height="14" rx="3" />
                    <path d="M9 11h10M9 15h6" />
                  </svg>
                </div>
                <div class="output-card-label">æœˆåº¦æŠ¥å‘Š</div>
                <div class="output-card-subtext">
                  ç»¼åˆæœ¬æœˆå¤–éƒ¨ç¯å¢ƒã€å“ç‰Œè¡¨ç°ç”Ÿæˆçš„ Agent æ´å¯Ÿ
                </div>
              </div>
              <div class="output-card">
                <div class="output-card-icon">
                  <svg
                    width="28"
                    height="28"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <circle cx="9" cy="14" r="4" />
                    <circle cx="19" cy="14" r="4" />
                    <path d="M13 14h2" />
                  </svg>
                </div>
                <div class="output-card-label">ç«å“å¯¹æ¯”</div>
                <div class="output-card-subtext">å¯¹æ¯”ä¸»è¦ç«å“è¡¨ç°</div>
              </div>
              <div class="output-card">
                <div class="output-card-icon">
                  <svg
                    width="28"
                    height="28"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M7 17c2-2 6-2 8 0m-8 0c2-2 6-2 8 0m-8 0V9a5 5 0 0 1 10 0v8"
                    />
                  </svg>
                </div>
                <div class="output-card-label">ç”¨æˆ·æ´å¯Ÿ</div>
                <div class="output-card-subtext">æ´å¯Ÿå® ç‰©ä¸»éœ€æ±‚ä¸åé¦ˆ</div>
              </div>
              <div class="output-card">
                <div class="output-card-icon">
                  <svg
                    width="28"
                    height="28"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M4 18V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12" />
                    <rect x="4" y="18" width="16" height="4" rx="2" />
                  </svg>
                </div>
                <div class="output-card-label">å¸‚åœºè¶‹åŠ¿</div>
                <div class="output-card-subtext">è¿½è¸ªä¸»ç²®å¸‚åœºåŠ¨æ€</div>
              </div>
              <div class="output-card">
                <div class="output-card-icon">
                  <svg
                    width="28"
                    height="28"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <circle cx="14" cy="14" r="10" />
                    <path d="M14 8v6l4 2" />
                  </svg>
                </div>
                <div class="output-card-label">å“ç‰Œå¥åº·åº¦</div>
                <div class="output-card-subtext">ç›‘æµ‹å“ç‰Œå£°é‡ä¸å£ç¢‘</div>
              </div>
              <div class="output-card">
                <div class="output-card-icon">
                  <svg
                    width="28"
                    height="28"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <rect x="6" y="6" width="16" height="16" rx="4" />
                    <path d="M10 10h8v8h-8z" />
                  </svg>
                </div>
                <div class="output-card-label">æ–°å“ç­–ç•¥</div>
                <div class="output-card-subtext">
                  Agent åŸºäºå“ç‰Œäººæ ¼å’Œä¸šåŠ¡è¡¨ç°ç”Ÿæˆçš„ç­–ç•¥
                </div>
              </div>
            </div>
          </div>

          <!-- å³ä¾§èŠå¤©åŒºåŸŸ -->
          <div class="chat-container">
            <div class="chat-header">
              <div class="chat-title">AI åŠ©æ‰‹</div>
              <div class="chat-subtitle">å“ç‰Œäººæ ¼ Â· æ™ºèƒ½åˆ†æ Â· ç­–ç•¥å†³ç­–</div>
            </div>

            <div class="chat-messages" id="chatMessages">
              <div class="message assistant">
                <div class="message-content">
                  æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„å“ç‰Œå¤§è„‘ã€‚æˆ‘å¯ä»¥å¸®æ‚¨åˆ†æå¸‚åœºè¶‹åŠ¿ã€ä¼˜åŒ–äº§å“ç­–ç•¥ã€è§£è¯»æ¶ˆè´¹è€…æ´å¯Ÿã€‚è¯·é—®æ‚¨æƒ³äº†è§£ä»€ä¹ˆï¼Ÿ
                </div>
              </div>

              <div class="quick-actions">
                <div
                  class="quick-action"
                  onclick="sendQuickMessage('åˆ†ææˆ‘çš„ä¸»ç²®å“ç‰Œæœ¬æœˆè¡¨ç°')"
                >
                  åˆ†ææˆ‘çš„ä¸»ç²®å“ç‰Œæœ¬æœˆè¡¨ç°
                </div>
                <div
                  class="quick-action"
                  onclick="sendQuickMessage('å“ªäº›ä¸»ç²®SKUæŠ•æ”¾æ•ˆæœæœ€å¥½ï¼Ÿ')"
                >
                  å“ªäº›ä¸»ç²®SKUæŠ•æ”¾æ•ˆæœæœ€å¥½ï¼Ÿ
                </div>
                <div
                  class="quick-action"
                  onclick="sendQuickMessage('æœ€è¿‘å® ç‰©ä¸»è¯„è®ºæœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ')"
                >
                  æœ€è¿‘å® ç‰©ä¸»è¯„è®ºæœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ
                </div>
                <div
                  class="quick-action"
                  onclick="sendQuickMessage('å¸®æˆ‘åˆ†æç«å“ä¸»ç²®ç­–ç•¥')"
                >
                  å¸®æˆ‘åˆ†æç«å“ä¸»ç²®ç­–ç•¥
                </div>
              </div>

              <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                  <div class="typing-dot"></div>
                  <div class="typing-dot"></div>
                  <div class="typing-dot"></div>
                </div>
              </div>
            </div>

            <div class="chat-input-container">
              <div class="chat-input-wrapper">
                <textarea
                  class="chat-input"
                  id="chatInput"
                  placeholder="è¯·æé—®ï¼Œå›ç­”åŸºäºå“ç‰Œå¤§è„‘..."
                  rows="1"
                ></textarea>
                <button
                  class="send-button"
                  id="sendButton"
                  onclick="sendMessage()"
                >
                  <svg
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="m22 2-7 20-4-9-9-4 20-7z" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      let currentDataSource = "trend";
      const chatMessages = document.getElementById("chatMessages");
      const chatInput = document.getElementById("chatInput");
      const sendButton = document.getElementById("sendButton");
      const typingIndicator = document.getElementById("typingIndicator");

      // æ•°æ®æºé€‰æ‹©
      function selectDataSource(element, source) {
        document
          .querySelectorAll(".data-source")
          .forEach((el) => el.classList.remove("active"));
        element.classList.add("active");
        currentDataSource = source;

        const sourceNames = {
          trend: "å“ç‰Œè¶‹åŠ¿åˆ†æ",
          sku: "SKUæŠ•æ”¾æ•ˆæœ",
          content: "å†…å®¹é“¾è·¯åˆ†æ",
          sentiment: "ç”¨æˆ·è¯­è¨€æ´å¯Ÿ",
          personality: "å“ç‰Œäººæ ¼",
        };

        updateDashboard(source);
        addMessage(
          "assistant",
          `å·²åˆ‡æ¢åˆ° ${sourceNames[source]} æ•°æ®æºï¼Œæ‚¨å¯ä»¥é’ˆå¯¹è¿™ä¸ªç»´åº¦æé—®äº†ã€‚`
        );
      }

      // æ›´æ–°ä»ªè¡¨æ¿æ•°æ®
      function updateDashboard(source) {
        const dashboardData = {
          trend: {
            metrics: [
              { value: "Â¥3.2M", label: "æœ¬æœˆé”€å”®é¢", trend: "+25.5%" },
              { value: "18.5%", label: "å¸‚åœºä»½é¢", trend: "+3.1%" },
              { value: "86", label: "æ´»è·ƒSKUæ•°", trend: "+15" },
              { value: "298", label: "å¹³å‡å®¢å•ä»·", trend: "+45" },
            ],
            chartData: [65, 72, 68, 75, 82, 78, 85],
          },
          sku: {
            metrics: [
              { value: "3.8", label: "å¹³å‡ROI", trend: "+0.6" },
              { value: "Â¥1.5M", label: "å‘¨æŠ•æ”¾é¢", trend: "+25%" },
              { value: "92%", label: "è½¬åŒ–ç‡", trend: "+8%" },
              { value: "3.2", label: "ç‚¹å‡»ç‡", trend: "+0.5" },
            ],
            chartData: [45, 52, 48, 55, 62, 58, 65],
          },
          content: {
            metrics: [
              { value: "2.5K", label: "å†…å®¹æ•°", trend: "+256" },
              { value: "5.8%", label: "äº’åŠ¨ç‡", trend: "+1.2%" },
              { value: "3.2", label: "å¹³å‡ç‚¹èµ", trend: "+0.6" },
              { value: "92%", label: "å†…å®¹è´¨é‡", trend: "+15%" },
            ],
            chartData: [35, 42, 38, 45, 52, 48, 55],
          },
          sentiment: {
            metrics: [
              { value: "85%", label: "æ­£é¢è¯„ä»·", trend: "+8%" },
              { value: "3.5K", label: "è¯„è®ºæ•°", trend: "+256" },
              { value: "4.6", label: "å¹³å‡è¯„åˆ†", trend: "+0.4" },
              { value: "92%", label: "æƒ…æ„Ÿå‡†ç¡®ç‡", trend: "+3%" },
            ],
            chartData: [55, 62, 58, 65, 72, 68, 75],
          },
          personality: {
            metrics: [
              { value: "88%", label: "äººæ ¼ä¸€è‡´æ€§", trend: "+10%" },
              { value: "4.9", label: "å“ç‰Œæ¸©åº¦", trend: "+0.4" },
              { value: "94%", label: "ç”¨æˆ·è®¤åŒåº¦", trend: "+6%" },
              { value: "3.8", label: "å·®å¼‚åŒ–æŒ‡æ•°", trend: "+0.5" },
            ],
            chartData: [75, 82, 78, 85, 92, 88, 95],
          },
        };

        const data = dashboardData[source];

        // æ›´æ–°æŒ‡æ ‡
        for (let i = 0; i < 4; i++) {
          const metric = data.metrics[i];
          document.getElementById(`metric${i + 1}`).innerHTML = `${
            metric.value
          }<span class="trend-indicator ${
            metric.trend.startsWith("+") ? "trend-up" : "trend-down"
          }">${metric.trend}</span>`;
          document.getElementById(`metric${i + 1}Label`).textContent =
            metric.label;
        }

        // æ›´æ–°å›¾è¡¨
        const chartContainer = document.getElementById("chartContainer");
        chartContainer.innerHTML = "";

        const maxValue = Math.max(...data.chartData);
        data.chartData.forEach((value, index) => {
          const bar = document.createElement("div");
          bar.className = "chart-bar";
          bar.style.left = `${index * 12}%`;
          bar.style.height = `${(value / maxValue) * 100}%`;

          const label = document.createElement("div");
          label.className = "chart-label";
          label.style.left = `${index * 12}%`;
          label.textContent = `D${index + 1}`;

          chartContainer.appendChild(bar);
          chartContainer.appendChild(label);
        });
      }

      // å‘é€æ¶ˆæ¯
      function sendMessage() {
        const message = chatInput.value.trim();
        if (!message) return;

        addMessage("user", message);
        chatInput.value = "";
        showTypingIndicator();

        // æ¨¡æ‹ŸLLMå·¥å…·è°ƒç”¨ï¼ˆä»…æ¼”ç¤ºï¼‰
        if (/æ•°æ®|åˆ†æ|æŠ¥å‘Š/.test(message)) {
          addLLMToolPill(`
            <div class="llm-tool-pill">
              <svg viewBox="0 0 20 20" fill="none"><path d="M10 2v16M2 10h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              æ­£åœ¨åˆ†æå® ç‰©ä¸»ç²®å¸‚åœºæ•°æ®
            </div>
            <div class="llm-tool-pill">
              <svg viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2"/><path d="M6 10h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              æ­£åœ¨æœç´¢å® ç‰©ä¸»ç²®ç”¨æˆ·è¯„è®º
            </div>
            <div class="llm-tool-status">æ­£åœ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š...</div>
          `);
        }

        // æ¨¡æ‹ŸAIå›å¤
        setTimeout(() => {
          hideTypingIndicator();
          generateAIResponse(message);
        }, 1500 + Math.random() * 1000);
      }

      // å¿«é€Ÿæ“ä½œ
      function sendQuickMessage(message) {
        addMessage("user", message);
        showTypingIndicator();

        // æ¨¡æ‹ŸLLMå·¥å…·è°ƒç”¨ï¼ˆä»…æ¼”ç¤ºï¼‰
        if (/æ•°æ®|åˆ†æ|æŠ¥å‘Š/.test(message)) {
          addLLMToolPill(`
            <div class="llm-tool-pill">
              <svg viewBox="0 0 20 20" fill="none"><path d="M10 2v16M2 10h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              æ­£åœ¨åˆ†æå® ç‰©ä¸»ç²®å¸‚åœºæ•°æ®
            </div>
            <div class="llm-tool-pill">
              <svg viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2"/><path d="M6 10h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              æ­£åœ¨æœç´¢å® ç‰©ä¸»ç²®ç”¨æˆ·è¯„è®º
            </div>
            <div class="llm-tool-status">æ­£åœ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š...</div>
          `);
        }

        setTimeout(() => {
          hideTypingIndicator();
          generateAIResponse(message);
        }, 1500 + Math.random() * 1000);
      }

      // æ·»åŠ æ¶ˆæ¯
      function addMessage(sender, content) {
        const messageDiv = document.createElement("div");
        messageDiv.className = `message ${sender}`;
        messageDiv.innerHTML = `<div class="message-content">${content}</div>`;

        chatMessages.insertBefore(messageDiv, typingIndicator);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      // LLMå·¥å…·ä½¿ç”¨æç¤º
      function addLLMToolPill(html) {
        const div = document.createElement("div");
        div.innerHTML = html;
        chatMessages.insertBefore(div, typingIndicator);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      // æ˜¾ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
      function showTypingIndicator() {
        typingIndicator.style.display = "block";
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      // éšè—æ‰“å­—æŒ‡ç¤ºå™¨
      function hideTypingIndicator() {
        typingIndicator.style.display = "none";
      }

      // ç”ŸæˆAIå›å¤
      function generateAIResponse(userMessage) {
        const responses = {
          trend: {
            åˆ†ææˆ‘çš„ä¸»ç²®å“ç‰Œæœ¬æœˆé”€å”®è¡¨ç°: `<strong>ä¸»ç²®å“ç‰Œé”€å”®è¡¨ç°åˆ†æ</strong><br><br>æœ¬æœˆæ•´ä½“è¡¨ç°ï¼š<br>â€¢ é”€å”®é¢åŒæ¯”å¢é•¿ +25.5%<br>â€¢ ä¸»åŠ›ä»·æ ¼å¸¦é›†ä¸­åœ¨ 200-400å…ƒåŒºé—´<br>â€¢ å¤©çŒ«å¹³å°å æ¯”58%ï¼ŒæŠ–éŸ³ç”µå•†å æ¯”28%<br><br><strong>ç­–ç•¥å»ºè®®ï¼š</strong><br>å»ºè®®åŠ å¤§300-500å…ƒä»·æ ¼å¸¦äº§å“æŠ•å…¥ï¼Œè¯¥åŒºé—´å¢é•¿æ½œåŠ›è¾ƒå¤§ï¼Œç‰¹åˆ«æ˜¯åŠŸèƒ½æ€§ä¸»ç²®äº§å“ã€‚`,

            ç«å“ç­–ç•¥åˆ†æ: `<strong>ä¸»ç²®ç«å“ç­–ç•¥å¯¹æ¯”</strong><br><br>ä¸»è¦ç«äº‰å¯¹æ‰‹åˆ†æï¼š<br>â€¢ å“ç‰ŒAï¼šé‡ç‚¹å¸ƒå±€å°çº¢ä¹¦+æŠ–éŸ³ï¼ŒKOLç­–ç•¥ä¸ºä¸»<br>â€¢ å“ç‰ŒBï¼šä¼ ç»Ÿç”µå•†å¹³å°æ·±è€•ï¼Œä»·æ ¼æˆ˜ç•¥æ˜æ˜¾<br>â€¢ å“ç‰ŒCï¼šæ–°å“è¿­ä»£é¢‘ç¹ï¼ŒåŠŸèƒ½æ€§ä¸»ç²®ä¸ºä¸»<br><br><strong>å·®å¼‚åŒ–æœºä¼šï¼š</strong><br>å»ºè®®åœ¨Bç«™å’ŒçŸ¥ä¹å¹³å°åŠ å¤§æŠ•å…¥ï¼Œç«å“è¦†ç›–ç›¸å¯¹è¾ƒå°‘ï¼Œå¯é‡ç‚¹æ¨å¹¿ä¸“ä¸šè¥å…»çŸ¥è¯†ã€‚`,
          },

          sku: {
            "å“ªäº›ä¸»ç²®SKUæŠ•æ”¾æ•ˆæœæœ€å¥½ï¼Ÿ": `<strong>é«˜æ•ˆä¸»ç²®SKUæŠ•æ”¾æ’è¡Œ</strong><br><br>TOP 3 è¡¨ç°SKUï¼š<br>1. ã€æ— è°·ç‰©æˆçŠ¬ç²®ã€‘ROI 3.8ï¼Œå‘¨æŠ•å…¥15ä¸‡<br>2. ã€ç¾æ¯›é…æ–¹å¹¼çŠ¬ç²®ã€‘ROI 3.2ï¼Œå‘¨æŠ•å…¥12ä¸‡<br>3. ã€è‚ èƒƒè°ƒç†æˆçŠ¬ç²®ã€‘ROI 3.0ï¼Œå‘¨æŠ•å…¥18ä¸‡<br><br><strong>ä¼˜åŒ–å»ºè®®ï¼š</strong><br>æ— è°·ç‰©ç³»åˆ—å¯é€‚å½“åŠ å¤§æŠ•å…¥ï¼Œç¾æ¯›é…æ–¹å»ºè®®æ‰©å¤§æŠ•æ”¾å¹³å°è¦†ç›–ã€‚`,

            åˆ†ææˆ‘çš„ä¸»ç²®å“ç‰Œæœ¬æœˆé”€å”®è¡¨ç°: `<strong>SKUç»´åº¦é”€å”®åˆ†æ</strong><br><br>æœ¬æœˆSKUè¡¨ç°æ¦‚è§ˆï¼š<br>â€¢ æ´»è·ƒSKUæ•°é‡ï¼š86ä¸ª<br>â€¢ å¹³å‡ROIï¼š2.8ï¼ˆè¡Œä¸šå¹³å‡2.2ï¼‰<br>â€¢ å¤´éƒ¨SKUï¼ˆTop 10ï¼‰è´¡çŒ®82%é”€å”®é¢<br>â€¢ åŠŸèƒ½æ€§ä¸»ç²®SKUè½¬åŒ–ç‡æ˜¾è‘—æå‡<br><br><strong>ä¼˜åŒ–æ–¹å‘ï¼š</strong><br>å»ºè®®è°ƒæ•´é•¿å°¾SKUæŠ•æ”¾é¢„ç®—ï¼Œé›†ä¸­èµ„æºåœ¨åŠŸèƒ½æ€§ä¸»ç²®äº§å“ã€‚`,
          },

          content: {
            "æœ€è¿‘å® ç‰©ä¸»è¯„è®ºæœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ": `<strong>ç”¨æˆ·è¯„è®ºè¶‹åŠ¿åˆ†æ</strong><br><br>æœ€è¿‘7å¤©å†…å®¹è¡¨ç°ï¼š<br>â€¢ ç§è‰ç¬”è®°äº’åŠ¨ç‡ +18%<br>â€¢ äº§å“æµ‹è¯„ç±»å†…å®¹è¡¨ç°æœ€ä½³<br>â€¢ "é€‚å£æ€§"ã€"è¥å…»å‡è¡¡"æåŠé¢‘æ¬¡ä¸Šå‡<br>â€¢ è´Ÿé¢è¯„è®ºä¸»è¦é›†ä¸­åœ¨åŒ…è£…å’Œå‚¨å­˜<br><br><strong>å†…å®¹ç­–ç•¥å»ºè®®ï¼š</strong><br>åŠ å¤§æµ‹è¯„ç±»å†…å®¹æŠ•å…¥ï¼Œä¼˜åŒ–äº§å“åŒ…è£…å’Œå‚¨å­˜è¯´æ˜ã€‚`,

            åˆ†ææˆ‘çš„ä¸»ç²®å“ç‰Œæœ¬æœˆé”€å”®è¡¨ç°: `<strong>å†…å®¹é“¾è·¯é”€å”®åˆ†æ</strong><br><br>æœ¬æœˆå†…å®¹æŠ•æ”¾æ•ˆæœï¼š<br>â€¢ æ€»æŠ•æ”¾å†…å®¹ï¼š2,547æ¡<br>â€¢ å¹³å‡å•æ¡å†…å®¹ROIï¼š1.8<br>â€¢ å°çº¢ä¹¦ç§è‰â†’å¤©çŒ«è½¬åŒ–é“¾è·¯æœ€ä½³<br>â€¢ çŸ­è§†é¢‘å†…å®¹æ¯”å›¾æ–‡å†…å®¹è½¬åŒ–é«˜35%<br><br><strong>å†…å®¹ä¼˜åŒ–æ–¹å‘ï¼š</strong><br>å»ºè®®å¢åŠ çŸ­è§†é¢‘å†…å®¹æ¯”ä¾‹ï¼Œç‰¹åˆ«æ˜¯äº§å“ä½¿ç”¨åœºæ™¯å’Œå® ç‰©é£Ÿç”¨æ•ˆæœå±•ç¤ºã€‚`,
          },

          sentiment: {
            "æœ€è¿‘å® ç‰©ä¸»è¯„è®ºæœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ": `<strong>ç”¨æˆ·è¯­è¨€æ´å¯ŸæŠ¥å‘Š</strong><br><br>æƒ…æ„Ÿåˆ†æç»“æœï¼š<br>â€¢ æ­£é¢æƒ…æ„Ÿå æ¯”ï¼š85%ï¼ˆâ†‘8%ï¼‰<br>â€¢ é«˜é¢‘å¥½è¯„è¯ï¼š["é€‚å£æ€§å¥½", "è¥å…»å‡è¡¡", "æ€§ä»·æ¯”é«˜"]<br>â€¢ æ–°å¢å…³æ³¨ç‚¹ï¼šåŸæ–™æ¥æºã€å‚¨å­˜æ–¹å¼<br>â€¢ ç”¨æˆ·æ›´å…³æ³¨äº§å“ä¸“ä¸šæ€§å’Œå®‰å…¨æ€§<br><br><strong>å“ç‰Œè°ƒæ€§å»ºè®®ï¼š</strong><br>å¯ä»¥åŠ å¼ºåŸæ–™æº¯æºå’Œäº§å“å®‰å…¨æ€§çš„ä¼ æ’­ï¼Œè¿åˆç”¨æˆ·å…³æ³¨ç‚¹å˜åŒ–ã€‚`,

            ç«å“ç­–ç•¥åˆ†æ: `<strong>å“ç‰Œè¯­è¨€å¯¹æ¯”åˆ†æ</strong><br><br>å“ç‰Œè°ƒæ€§å·®å¼‚ï¼š<br>â€¢ æˆ‘æ–¹ï¼šä¸“ä¸šã€å¯é ã€æ€§ä»·æ¯”<br>â€¢ ç«å“Aï¼šé«˜ç«¯ã€ç²¾è‡´ã€æ—¶å°š<br>â€¢ ç«å“Bï¼šä¼ ç»Ÿã€ç¨³é‡ã€å†å²æ„Ÿ<br><br>ç”¨æˆ·æ„ŸçŸ¥å·®å¼‚ï¼š<br>â€¢ æˆ‘æ–¹åœ¨"æ€§ä»·æ¯”"ç»´åº¦é¢†å…ˆ<br>â€¢ åœ¨"é«˜ç«¯æ„Ÿ"ç»´åº¦æœ‰æå‡ç©ºé—´<br><br><strong>ä¼˜åŒ–æ–¹å‘ï¼š</strong><br>ä¿æŒæ€§ä»·æ¯”ä¼˜åŠ¿ï¼Œé€‚å½“å¢åŠ é«˜ç«¯åŒ–è¡¨è¾¾ã€‚`,
          },

          personality: {
            åˆ†æå“ç‰Œäººæ ¼: `<strong>å“ç‰Œäººæ ¼åˆ†ææŠ¥å‘Š</strong><br><br>å½“å‰å“ç‰Œäººæ ¼ç‰¹å¾ï¼š<br>â€¢ ä¸“ä¸šå¯é ï¼ˆ88%åŒ¹é…åº¦ï¼‰<br>â€¢ æ¸©æš–äº²å’Œï¼ˆ82%åŒ¹é…åº¦ï¼‰<br>â€¢ åˆ›æ–°æ´»åŠ›ï¼ˆ70%åŒ¹é…åº¦ï¼‰<br>â€¢ é«˜ç«¯å“è´¨ï¼ˆ85%åŒ¹é…åº¦ï¼‰<br><br><strong>ç”¨æˆ·æ„ŸçŸ¥ï¼š</strong><br>â€¢ å“ç‰Œæ¸©åº¦è¯„åˆ†ï¼š4.9/5<br>â€¢ ç”¨æˆ·è®¤åŒåº¦ï¼š94%<br>â€¢ å·®å¼‚åŒ–æŒ‡æ•°ï¼š3.8/5<br><br><strong>ä¼˜åŒ–å»ºè®®ï¼š</strong><br>å»ºè®®åŠ å¼ºåˆ›æ–°æ´»åŠ›çš„è¡¨è¾¾ï¼Œå¹³è¡¡ä¸“ä¸šä¸äº²å’ŒåŠ›çš„å±•ç°ã€‚`,

            ç«å“ç­–ç•¥åˆ†æ: `<strong>å“ç‰Œäººæ ¼å¯¹æ¯”åˆ†æ</strong><br><br>äººæ ¼ç»´åº¦å¯¹æ¯”ï¼š<br>â€¢ ä¸“ä¸šåº¦ï¼šæˆ‘æ–¹é¢†å…ˆ12%<br>â€¢ äº²å’ŒåŠ›ï¼šç«å“Aé¢†å…ˆ10%<br>â€¢ åˆ›æ–°æ€§ï¼šç«å“Bé¢†å…ˆ8%<br>â€¢ å“è´¨æ„Ÿï¼šæˆ‘æ–¹é¢†å…ˆ6%<br><br><strong>å·®å¼‚åŒ–å»ºè®®ï¼š</strong><br>ä¿æŒä¸“ä¸šå¯é çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œé€‚å½“å¢åŠ åˆ›æ–°æ´»åŠ›çš„è¡¨è¾¾ï¼Œæå‡å“ç‰Œæ¸©åº¦ã€‚`,
          },
        };

        // æ ¹æ®å½“å‰æ•°æ®æºå’Œç”¨æˆ·é—®é¢˜ç”Ÿæˆå›å¤
        let response = "ğŸ¤– æ­£åœ¨åˆ†ææ‚¨çš„é—®é¢˜...";

        if (responses[currentDataSource]) {
          for (const key in responses[currentDataSource]) {
            if (
              userMessage.includes(key) ||
              key.includes(userMessage.substring(0, 10))
            ) {
              response = responses[currentDataSource][key];
              break;
            }
          }
        }

        // å¦‚æœæ²¡æœ‰åŒ¹é…çš„é¢„è®¾å›å¤ï¼Œç”Ÿæˆé€šç”¨å›å¤
        if (response === "ğŸ¤– æ­£åœ¨åˆ†ææ‚¨çš„é—®é¢˜...") {
          const genericResponses = [
            `åŸºäº${
              currentDataSource === "trend"
                ? "å“ç‰Œè¶‹åŠ¿"
                : currentDataSource === "sku"
                ? "SKUæŠ•æ”¾"
                : currentDataSource === "content"
                ? "å†…å®¹é“¾è·¯"
                : "ç”¨æˆ·è¯­è¨€"
            }æ•°æ®åˆ†æï¼Œæˆ‘ä¸ºæ‚¨æ‰¾åˆ°äº†ä»¥ä¸‹æ´å¯Ÿï¼š<br><br>â€¢ æ•°æ®æ˜¾ç¤ºè¯¥é¢†åŸŸå­˜åœ¨æ˜æ˜¾å¢é•¿æœºä¼š<br>â€¢ å»ºè®®å…³æ³¨å…³é”®æŒ‡æ ‡çš„å˜åŒ–è¶‹åŠ¿<br>â€¢ å¯ä»¥è€ƒè™‘ä¼˜åŒ–å½“å‰ç­–ç•¥é…ç½®<br><br>ğŸ’¡ æ‚¨å¯ä»¥æä¾›æ›´å…·ä½“çš„å“ç‰Œæˆ–äº§å“ä¿¡æ¯ï¼Œæˆ‘å°†ç»™å‡ºæ›´ç²¾å‡†çš„åˆ†æã€‚`,

            `æ ¹æ®æœ€æ–°çš„æ•°æ®åˆ†æç»“æœï¼š<br><br>ğŸ“ˆ å½“å‰è¡¨ç°è¶…å‡ºè¡Œä¸šå¹³å‡æ°´å¹³<br>ğŸ¯ å­˜åœ¨è¿›ä¸€æ­¥ä¼˜åŒ–çš„ç©ºé—´<br>ğŸ’° ROIæå‡æ½œåŠ›è¾ƒå¤§<br><br>å»ºè®®æ‚¨æä¾›å…·ä½“çš„å“ç‰Œåç§°æˆ–äº§å“ä¿¡æ¯ï¼Œæˆ‘å¯ä»¥ç»™å‡ºæ›´è¯¦ç»†çš„ç­–ç•¥å»ºè®®ã€‚`,

            `æˆ‘å·²ç»è°ƒå–äº†ç›¸å…³æ•°æ®è¿›è¡Œåˆ†æï¼š<br><br>âœ¨ å‘ç°äº†å‡ ä¸ªå€¼å¾—å…³æ³¨çš„è¶‹åŠ¿<br>ğŸ” è¯†åˆ«å‡ºæ½œåœ¨çš„ä¼˜åŒ–æœºä¼š<br>ğŸ“Š æ•´ç†äº†å¯¹æ¯”åŸºå‡†æ•°æ®<br><br>å¦‚æœæ‚¨èƒ½æä¾›æ›´å¤šèƒŒæ™¯ä¿¡æ¯ï¼Œæ¯”å¦‚å…·ä½“çš„å“ç‰Œåç§°ã€äº§å“ç±»ç›®æˆ–æ—¶é—´èŒƒå›´ï¼Œæˆ‘å¯ä»¥æä¾›æ›´ç²¾å‡†çš„æ´å¯Ÿã€‚`,
          ];

          response =
            genericResponses[
              Math.floor(Math.random() * genericResponses.length)
            ];
        }

        addMessage("assistant", response);
      }

      // è¾“å…¥æ¡†äº‹ä»¶å¤„ç†
      chatInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });

      // è¾“å…¥æ¡†è‡ªåŠ¨è°ƒæ•´é«˜åº¦
      chatInput.addEventListener("input", function () {
        this.style.height = "auto";
        this.style.height = Math.min(this.scrollHeight, 120) + "px";
      });

      // åˆå§‹åŒ–
      document.addEventListener("DOMContentLoaded", function () {
        chatInput.focus();
        updateDashboard("trend"); // é»˜è®¤æ˜¾ç¤ºè¶‹åŠ¿æ•°æ®
      });
    </script>
  </body>
</html>
